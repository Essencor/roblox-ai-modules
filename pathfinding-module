-- MINIMAL PATHFINDING MODULE TEST
print("[Pathfinding] Module loading...")

local PathfindingModule = {}

print("[Pathfinding] Creating Navigate function...")

function PathfindingModule.Navigate(target, mode)
    print("[Pathfinding] Navigate called with target:", tostring(target), "mode:", tostring(mode))
    
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local character = LocalPlayer.Character
    
    if not character then
        warn("[Pathfinding] No character")
        return false
    end
    
    local humanoid = character:FindFirstChildOfClass("Humanoid")
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    
    if not humanoid or not rootPart then
        warn("[Pathfinding] No humanoid or root part")
        return false
    end
    
    -- Get target position
    local targetPos
    if typeof(target) == "Vector3" then
        targetPos = target
    elseif typeof(target) == "Instance" then
        if target:IsA("BasePart") then
            targetPos = target.Position
        elseif target:IsA("Model") then
            targetPos = target:GetPivot().Position
        end
    end
    
    if not targetPos then
        warn("[Pathfinding] Invalid target")
        return false
    end
    
    print("[Pathfinding] Moving to:", targetPos)
    humanoid:MoveTo(targetPos)
    
    return true
end

function PathfindingModule.Stop()
    print("[Pathfinding] Stop called")
    local Players = game:GetService("Players")
    local LocalPlayer = Players.LocalPlayer
    local character = LocalPlayer.Character
    if character then
        local humanoid = character:FindFirstChildOfClass("Humanoid")
        local rootPart = character:FindFirstChild("HumanoidRootPart")
        if humanoid and rootPart then
            humanoid:MoveTo(rootPart.Position)
        end
    end
end

function PathfindingModule.GetStatus()
    return {
        isNavigating = false,
        currentWaypoint = 0,
        totalWaypoints = 0,
        mode = "basic",
        stuckCount = 0,
        deathZones = 0,
        stats = {
            totalPaths = 0,
            successfulPaths = 0,
            failedPaths = 0,
            jumpsExecuted = 0,
            stucksRecovered = 0,
            deathsLearned = 0
        }
    }
end

function PathfindingModule.ClearLearning()
    print("[Pathfinding] ClearLearning called")
end

print("[Pathfinding] Module loaded successfully!")
return PathfindingModule
